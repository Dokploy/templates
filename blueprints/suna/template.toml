[variables]
main_domain = "${domain}"
redis_password = "" # Optional Redis password, empty by default
supabase_anon_key = "${base64:32}" # Supabase anon key
supabase_service_role_key = "${base64:32}" # Supabase service role key
anthropic_api_key = "${base64:32}" # Anthropic API key
openai_api_key = "${base64:32}" # OpenAI API key
openrouter_api_key = "${base64:32}" # OpenRouter API key
tavily_api_key = "${base64:32}" # Tavily API key
firecrawl_api_key = "${base64:32}" # Firecrawl API key
daytona_api_key = "${base64:32}" # Daytona API key
qstash_token = "${base64:32}" # QStash token
qstash_current_signing_key = "${base64:32}" # QStash current signing key
qstash_next_signing_key = "${base64:32}" # QStash next signing key
mcp_credential_encryption_key = "${base64:32}" # MCP encryption key
rapid_api_key = "${base64:32}" # Rapid API key
smithery_api_key = "${base64:32}" # Smithery API key

[config]

[[config.domains]]
serviceName = "frontend"
port = 3000
host = "${main_domain}"
path = "/"

[[config.domains]]
serviceName = "backend"
port = 8000
host = "backend.${main_domain}"
path = "/"

[config.env]
# Backend
"backend.ENV_MODE" = "local"
"backend.SUPABASE_URL" = "https://your-project.supabase.co"
"backend.SUPABASE_ANON_KEY" = "${supabase_anon_key}" # Supabase anon key
"backend.SUPABASE_SERVICE_ROLE_KEY" = "${supabase_service_role_key}" # Supabase service role key
"backend.REDIS_HOST" = "redis"
"backend.REDIS_PORT" = "6379"
"backend.REDIS_PASSWORD" = "${redis_password}" # Redis password
"backend.REDIS_SSL" = "False"
"backend.ANTHROPIC_API_KEY" = "${anthropic_api_key}" # Anthropic API key
"backend.OPENAI_API_KEY" = "${openai_api_key}" # OpenAI API key
"backend.OPENROUTER_API_KEY" = "${openrouter_api_key}" # OpenRouter API key
"backend.MODEL_TO_USE" = "anthropic/claude-sonnet-4-20250514"
"backend.TAVILY_API_KEY" = "${tavily_api_key}" # Tavily API key
"backend.FIRECRAWL_API_KEY" = "${firecrawl_api_key}" # Firecrawl API key
"backend.FIRECRAWL_URL" = "https://api.firecrawl.dev"
"backend.DAYTONA_API_KEY" = "${daytona_api_key}" # Daytona API key
"backend.DAYTONA_SERVER_URL" = "https://app.daytona.io/api"
"backend.DAYTONA_TARGET" = "us"
"backend.QSTASH_URL" = "https://qstash.upstash.io"
"backend.QSTASH_TOKEN" = "${qstash_token}" # QStash token
"backend.QSTASH_CURRENT_SIGNING_KEY" = "${qstash_current_signing_key}" # QStash current signing key
"backend.QSTASH_NEXT_SIGNING_KEY" = "${qstash_next_signing_key}" # QStash next signing key
"backend.WEBHOOK_BASE_URL" = "https://${main_domain}"
"backend.MCP_CREDENTIAL_ENCRYPTION_KEY" = "${mcp_credential_encryption_key}" # MCP encryption key
"backend.RAPID_API_KEY" = "${rapid_api_key}" # Rapid API key
"backend.SMITHERY_API_KEY" = "${smithery_api_key}" # Smithery API key

# Frontend
"frontend.NODE_ENV" = "production"
"frontend.NEXT_PUBLIC_URL" = "http://${main_domain}:3000"
"frontend.NEXT_PUBLIC_SUPABASE_URL" = "https://your-project.supabase.co" # Supabase URL
"frontend.NEXT_PUBLIC_SUPABASE_ANON_KEY" = "${supabase_anon_key}" # Supabase anon key

[[config.mounts]]
source = "redis_conf"
target = "/usr/local/etc/redis/redis.conf"
serviceName = "redis"
filePath = "/usr/local/etc/redis/redis.conf"
readOnly = true
content = """
save 60 1
loglevel warning
"""
