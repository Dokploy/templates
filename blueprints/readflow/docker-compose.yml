version: "3.8"
services:
  db:
    image: postgres:14
    restart: always
    volumes:
      - db-data:/var/lib/postgresql/data

  imgproxy:
    image: darthsim/imgproxy:latest
    restart: always
    logging:
      driver: "json-file"
      options:
        max-size: "1m"

  gotenberg:
    image: gotenberg/gotenberg:7
    restart: always

  readflow:
    image: ncarlier/readflow:edge
    restart: always
    ports:
      - 8080
    depends_on:
      - db
      - imgproxy
      - gotenberg
    volumes:
      - readflow-htpasswd:/var/local/demo.htpasswd

volumes:
  db-data:
  readflow-htpasswd:
