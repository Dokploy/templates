[variables]
main_domain = "${domain}"
postgres_password = "${password}"
minio_root_password = "${password}"
access_token_secret = "${password}"
refresh_token_secret = "${password}"
chrome_token = "${password:16}"
mail_from = "noreply@${main_domain}"

[config.env]
# Application versions
APP_VERSION = "latest"
POSTGRES_VERSION = "16-alpine"
MINIO_VERSION = "latest"
CHROME_VERSION = "latest"

# Base configuration
PORT = "3000"
NODE_ENV = "production"

# URLs
PUBLIC_URL = "https://${main_domain}"
STORAGE_URL = "https://minio.${main_domain}/default"

# Database
POSTGRES_DB = "postgres"
POSTGRES_USER = "postgres"
POSTGRES_PASSWORD = "${postgres_password}"
DATABASE_URL = "postgresql://postgres:${postgres_password}@postgres:5432/postgres"

# Minio
MINIO_ROOT_USER = "minioadmin"
MINIO_ROOT_PASSWORD = "${minio_root_password}"
STORAGE_ENDPOINT = "minio"
STORAGE_PORT = "9000"
STORAGE_REGION = "us-east-1"
STORAGE_BUCKET = "default"
STORAGE_ACCESS_KEY = "minioadmin"
STORAGE_SECRET_KEY = "${minio_root_password}"
STORAGE_USE_SSL = "false"
STORAGE_SKIP_BUCKET_CHECK = "false"

# Chrome
CHROME_TOKEN = "${chrome_token}"
CHROME_URL = "ws://chrome:3000"

# Auth secrets
ACCESS_TOKEN_SECRET = "${access_token_secret}"
REFRESH_TOKEN_SECRET = "${refresh_token_secret}"

# Mail
MAIL_FROM = "${mail_from}"
SMTP_URL = ""

# Feature toggles
DISABLE_SIGNUPS = "false"
DISABLE_EMAIL_AUTH = "false"

# Optional integrations
CROWDIN_PROJECT_ID = ""
CROWDIN_PERSONAL_TOKEN = ""

# OAuth
GITHUB_CLIENT_ID = ""
GITHUB_CLIENT_SECRET = ""
GITHUB_CALLBACK_URL = ""
GOOGLE_CLIENT_ID = ""
GOOGLE_CLIENT_SECRET = ""
GOOGLE_CALLBACK_URL = ""

# OpenID Connect
VITE_OPENID_NAME = "OpenID"
OPENID_AUTHORIZATION_URL = ""
OPENID_CALLBACK_URL = ""
OPENID_CLIENT_ID = ""
OPENID_CLIENT_SECRET = ""
OPENID_ISSUER = ""
OPENID_SCOPE = "openid profile email"
OPENID_TOKEN_URL = ""
OPENID_USER_INFO_URL = ""

[config]
mounts = [
  { source = "minio_data", target = "/data" },
  { source = "postgres_data", target = "/var/lib/postgresql/data" }
]

[[config.domains]]
serviceName = "app"
port = 3000
host = "${main_domain}"

[[config.domains]]
serviceName = "minio"
port = 9000
host = "minio.${main_domain}"
