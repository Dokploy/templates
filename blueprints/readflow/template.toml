[variables]
main_domain = "${domain}"
postgres_password = "${password:32}"
readflow_hash_secret_key = "${base64:32}"
readflow_hash_secret_salt = "${base64:32}"

[config.env]
# Database
POSTGRES_DB = "readflow"
POSTGRES_USER = "postgres"
POSTGRES_PASSWORD = "${postgres_password}"

# Secrets
READFLOW_HASH_SECRET_KEY = "${readflow_hash_secret_key}"
READFLOW_HASH_SECRET_SALT = "${readflow_hash_secret_salt}"

# Readflow
READFLOW_DATABASE_URI = "postgres://postgres:${postgres_password}@db/readflow?sslmode=disable"
READFLOW_METRICS_LISTEN_ADDR = ":9090"
READFLOW_IMAGE_PROXY_URL = "http://imgproxy:8080"
READFLOW_PDF_SERVICE_PROVIDER = "http://gotenberg:3000/forms/chromium/convert/html"
READFLOW_AUTHN_METHOD = "basic"
READFLOW_AUTHN_BASIC_HTPASSWD_FILE = "file:///var/local/demo.htpasswd"
READFLOW_VERSION = "edge"

[config]
mounts = [
  { source = "db-data", target = "/var/lib/postgresql/data" },
  { source = "readflow_data", target = "/var/local" }
]

[[config.domains]]
serviceName = "readflow"
port = 8080
host = "${main_domain}"
