[variables]
main_domain = "${domain}"
db_name = "gumroad_production"
db_user = "gumroad"
db_password = "${password:16}"
db_root_password = "${password:20}"
secret_key_base = "${base64:64}"
devise_secret_key = "${base64:64}"

# Optional: Payment
stripe_api_key = ""
stripe_public_key = ""
paypal_client_id = ""
paypal_client_secret = ""

# Optional: S3
aws_access_key_id = ""
aws_secret_access_key = ""
aws_default_region = ""
s3_bucket = ""

[config.env]
DB_NAME = "${db_name}"
DB_USER = "${db_user}"
DB_PASSWORD = "${db_password}"
DB_ROOT_PASSWORD = "${db_root_password}"
SECRET_KEY_BASE = "${secret_key_base}"
DEVISE_SECRET_KEY = "${devise_secret_key}"
STRIPE_API_KEY = "${stripe_api_key}"
STRIPE_PUBLIC_KEY = "${stripe_public_key}"
PAYPAL_CLIENT_ID = "${paypal_client_id}"
PAYPAL_CLIENT_SECRET = "${paypal_client_secret}"
AWS_ACCESS_KEY_ID = "${aws_access_key_id}"
AWS_SECRET_ACCESS_KEY = "${aws_secret_access_key}"
AWS_DEFAULT_REGION = "${aws_default_region}"
S3_BUCKET = "${s3_bucket}"

[config]
mounts = [
  { source = "mysql_data", target = "/var/lib/mysql" },
  { source = "redis_data", target = "/data" },
  { source = "app_storage", target = "/app/storage" }
]

[[config.domains]]
serviceName = "gumroad-app"
port = 3000
host = "${main_domain}"
