[variables]
main_domain = "${domain}"
postgres_password = "${password:32}"
imgproxy_key = "${password:32}"
imgproxy_salt = "${password:32}"

[config]
[[config.domains]]
serviceName = "readflow"
port = 8080
host = "${main_domain}"
path = "/"

[config.env]
# db environment variables
POSTGRES_DB = "readflow"
POSTGRES_USER = "postgres"
POSTGRES_PASSWORD = "${postgres_password}"

# imgproxy environment variables
IMGPROXY_KEY = "${imgproxy_key}"
IMGPROXY_SALT = "${imgproxy_salt}"
IMGPROXY_ENABLE_WEBP_DETECTION = "true"

# gotenberg environment variables
# No environment variables required for gotenberg

# readflow environment variables
READFLOW_DATABASE_URI = "postgres://postgres:${postgres_password}@db/readflow?sslmode=disable"
READFLOW_METRICS_LISTEN_ADDR = ":9090"
# READFLOW_IMAGE_PROXY_URL = "http://imagor:8080"  # Uncomment and update if imagor service is added
READFLOW_PDF_SERVICE_PROVIDER = "http://gotenberg:3000/forms/chromium/convert/html"
READFLOW_AUTHN_METHOD = "basic"
READFLOW_AUTHN_BASIC_HTPASSWD_FILE = "/var/local/demo.htpasswd"

[[config.mounts]]
filePath = "/var/lib/postgresql/data"
content = ""

[[config.mounts]]
filePath = "/var/local/demo.htpasswd"
content = """
demo:$2y$10$3ixwpNFZ1T8/9/4d75rTGeF0t9tA8nZ/7rYp3bMGP3hG7g6sM3XBC
"""