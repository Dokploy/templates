[variables]
main_domain = "${domain}"
hmac_key = "${password:32}"

[config]
[[config.domains]]
serviceName = "nitter"
port = 8080
host = "${main_domain}"
path = "/"

[config.env]
# No environment variables required for nitter or nitter-redis
# All configuration is handled via nitter.conf (defined in mounts)

[[config.mounts]]
filePath = "/src/nitter.conf"
content = """
[Server]
hostname = "${main_domain}"  # for generating links
title = "Nitter"
address = "0.0.0.0"
port = 8080
https = false  # disable to enable cookies when not using https
httpMaxConnections = 100
staticDir = "./public"

[Cache]
listMinutes = 240
rssMinutes = 10
redisHost = "nitter-redis"
redisPort = 6379
redisPassword = ""
redisConnections = 20
redisMaxConnections = 30

[Config]
hmacKey = "${hmac_key}"
base64Media = false
enableRSS = true
enableDebug = false
proxy = ""
proxyAuth = ""

[Preferences]
theme = "Nitter"
replaceTwitter = "${main_domain}"
replaceYouTube = "piped.video"
replaceReddit = "teddit.net"
proxyVideos = true
hlsPlayback = false
infiniteScroll = false
"""

[[config.mounts]]
filePath = "/src/sessions.jsonl"
content = ""  # Populate with output from get_sessions.py or leave empty for manual setup

[[config.mounts]]
filePath = "/data"
content = ""