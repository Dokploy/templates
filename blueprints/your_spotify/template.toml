[variables]
main_domain = "${domain}"
server_domain = "${domain}"
spotify_public = "${base64:32}" # Spotify client ID
spotify_secret = "${base64:32}" # Spotify client secret
cors_origins = "http://${main_domain}:3000,http://${main_domain}:3001"

[config]
[[config.domains]]
serviceName = "server"
port = 8080
host = "${main_domain}"
path = "/"

[[config.domains]]
serviceName = "web"
port = 3000
host = "${server_domain}"
path = "/"

[config.env]
# Server environment variables
"server.API_ENDPOINT" = "http://${main_domain}" # Must match Spotify dashboard
"server.CLIENT_ENDPOINT" = "http://${server_domain}"
"server.SPOTIFY_PUBLIC" = "${spotify_public}" # Spotify client ID
"server.SPOTIFY_SECRET" = "${spotify_secret}" # Spotify client secret
"server.CORS" = "${cors_origins}"

# Web environment variables
"web.API_ENDPOINT" = "http://${main_domain}"

[[config.mounts]]
source = "your_spotify_db"
target = "/data/db"
serviceName = "mongo"