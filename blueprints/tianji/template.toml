[variables]
main_domain = "${domain}"
jwt_secret = "${password:32}" # Generate a random 32-character JWT secret
postgres_password = "${password:16}" # Generate a random 16-character password for PostgreSQL

[config]
[[config.domains]]
serviceName = "tianji" # Matches the service name in docker-compose.yml
port = 12345
host = "${main_domain}"
path = "/"

[config.env]
# Tianji service environment variables
"tianji.DATABASE_URL" = "postgresql://tianji:${postgres_password}@postgres:5432/tianji?schema=public" # PostgreSQL connection string; uses postgres service name for internal networking
"tianji.JWT_SECRET" = "${jwt_secret}" # Replace with your own JWT secret for security
"tianji.JWT_ISSUER" = "tianji.msgbyte.com" # Default issuer; replace with your own if needed
"tianji.JWT_AUDIENCE" = "msgbyte.com" # Default audience; replace with your own if needed
"tianji.ALLOW_REGISTER" = "false" # Controls whether registration is allowed
"tianji.ALLOW_OPENAPI" = "true" # Controls whether OpenAPI is enabled
"tianji.WEBSITE_ID" = "" # Optional: Add your own website ID for Tianji analytics

# PostgreSQL service environment variables
"postgres.POSTGRES_DB" = "tianji" # Database name for PostgreSQL
"postgres.POSTGRES_USER" = "tianji" # Database user for PostgreSQL
"postgres.POSTGRES_PASSWORD" = "${postgres_password}" # PostgreSQL password; matches DATABASE_URL

[[config.mounts]]
# No additional mounts required for this template