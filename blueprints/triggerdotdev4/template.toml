[variables]
main_domain = "${domain}"
session_secret = "${hash:32}"
magic_link_secret = "${hash:32}"
encryption_key = "${hash:32}"
managed_worker_secret = "${hash:32}"
db_password = "${password:24}"
db_user = "postgres"
db_name = "triggerdb"
clickhouse_user = "default"
clickhouse_password = "${password:16}"
docker_registry_username = "registry-user"
docker_registry_password = "${password:16}"
docker_registry_namespace = "trigger"
object_store_access_key_id = "${username}"
object_store_secret_access_key = "${password:24}"
minio_root_user = "admin"
minio_root_password = "${password:24}"

[config]
mounts = []

[[config.domains]]
serviceName = "webapp"
port = 3000
host = "${main_domain}"

[config.env]
# Webapp origins
APP_ORIGIN = "http://${main_domain}"
LOGIN_ORIGIN = "http://${main_domain}"
API_ORIGIN = "http://${main_domain}"
DEV_OTEL_EXPORTER_OTLP_ENDPOINT = "http://${main_domain}/otel"

# Secrets
SESSION_SECRET = "${session_secret}"
MAGIC_LINK_SECRET = "${magic_link_secret}"
ENCRYPTION_KEY = "${encryption_key}"
MANAGED_WORKER_SECRET = "${managed_worker_secret}"

# Postgres
POSTGRES_USER = "${db_user}"
POSTGRES_PASSWORD = "${db_password}"
POSTGRES_DB = "${db_name}"
DATABASE_URL = "postgresql://${db_user}:${db_password}@postgres:5432/${db_name}?schema=public&sslmode=disable"
DIRECT_URL = "postgresql://${db_user}:${db_password}@postgres:5432/${db_name}?schema=public&sslmode=disable"

# ClickHouse
CLICKHOUSE_USER = "${clickhouse_user}"
CLICKHOUSE_PASSWORD = "${clickhouse_password}"
CLICKHOUSE_URL = "http://${clickhouse_user}:${clickhouse_password}@clickhouse:8123?secure=false"
RUN_REPLICATION_CLICKHOUSE_URL = "http://${clickhouse_user}:${clickhouse_password}@clickhouse:8123"

# Docker Registry
DOCKER_REGISTRY_URL = "registry:5000"
DOCKER_REGISTRY_USERNAME = "${docker_registry_username}"
DOCKER_REGISTRY_PASSWORD = "${docker_registry_password}"
DOCKER_REGISTRY_NAMESPACE = "${docker_registry_namespace}"

# Object Store
OBJECT_STORE_ACCESS_KEY_ID = "${object_store_access_key_id}"
OBJECT_STORE_SECRET_ACCESS_KEY = "${object_store_secret_access_key}"

# Minio
MINIO_ROOT_USER = "${minio_root_user}"
MINIO_ROOT_PASSWORD = "${minio_root_password}"

# Trigger image version
TRIGGER_IMAGE_TAG = "v4-beta"
