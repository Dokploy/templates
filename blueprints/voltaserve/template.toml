[variables]
main_domain = "${domain}"
minio_root_password = "${password:32}" # Generate secure MinIO password
llm_gemini_api_key = "${password:32}" # Generate secure Gemini API key
jwt_signing_key = "${password:32}" # Generate secure JWT signing key

[config]
[[config.domains]]
serviceName = "ui" # Voltaserve UI
port = 3000
host = "${main_domain}"
path = "/"

[[config.domains]]
serviceName = "api" # Voltaserve API
port = 8080
host = "api-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "idp" # Identity Provider
port = 8081
host = "idp-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "webdav" # WebDAV
port = 8082
host = "webdav-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "console" # Console
port = 8086
host = "console-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "minio" # MinIO API
port = 9000
host = "minio-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "minio" # MinIO Console
port = 9001
host = "minio-console-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "cockroach" # CockroachDB SQL
port = 26257
host = "cockroach-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "cockroach" # CockroachDB Console
port = 18080
host = "cockroach-console-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "meilisearch" # Meilisearch
port = 7700
host = "meilisearch-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "redis" # Redis
port = 6379
host = "redis-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "maildev" # Maildev SMTP
port = 1025
host = "maildev-smtp-${main_domain}"
path = "/"

[[config.domains]]
serviceName = "maildev" # Maildev Web
port = 8025
host = "maildev-web-${main_domain}"
path = "/"

[config.env]
# Cockroach
COCKROACH_DATABASE = "voltaserve"
COCKROACH_USER = "voltaserve"

# MinIO
MINIO_ROOT_USER = "voltaserve"
MINIO_ROOT_PASSWORD = "${minio_root_password}" # MinIO admin password, sensitive value
MINIO_REGION = "us-east-1"

# API
API_PORT = "8080"
CONVERSION_URL = "http://conversion:8083"
LANGUAGE_URL = "http://language:8084"
MOSAIC_URL = "http://mosaic:8085"
POSTGRES_URL = "postgresql://voltaserve@cockroach:26257/voltaserve"
S3_URL = "minio:9000"
SEARCH_URL = "http://meilisearch:7700"
PUBLIC_UI_URL = "http://${main_domain}:3000"
REDIS_ADDRESS = "redis:6379"
SMTP_HOST = "maildev"
SMTP_PORT = "1025"
SMTP_SECURE = "false"
SMTP_USERNAME = ""
SMTP_PASSWORD = ""
SMTP_SENDER_ADDRESS = "no-reply@localhost"
SMTP_SENDER_NAME = "Voltaserve"
SNAPSHOT_WEBHOOK = "http://murph:8087/v1/webhooks/snapshots"

# IDP
IDP_PORT = "8081"
IDP_POSTGRES_URL = "postgresql://voltaserve@cockroach:26257/voltaserve"
IDP_SEARCH_URL = "http://meilisearch:7700"
IDP_PUBLIC_UI_URL = "http://${main_domain}:3000"
IDP_SMTP_HOST = "maildev"
IDP_SMTP_PORT = "1025"
IDP_SMTP_SECURE = "false"
IDP_SMTP_USERNAME = ""
IDP_SMTP_PASSWORD = ""
IDP_SMTP_SENDER_ADDRESS = "no-reply@localhost"
IDP_SMTP_SENDER_NAME = "Voltaserve"
USER_WEBHOOKS = "http://api:8080/v3/webhooks/users,http://murph:8087/v1/webhooks/users"

# UI
UI_API_URL = "http://api:8080"
UI_IDP_URL = "http://idp:8081"

# WebDAV
WEBDAV_PORT = "8082"
WEBDAV_IDP_URL = "http://idp:8081"
WEBDAV_API_URL = "http://api:8080"
WEBDAV_REDIS_ADDRESS = "redis:6379"
WEBDAV_S3_URL = "minio:9000"

# Conversion
CONVERSION_PORT = "8083"
ENABLE_INSTALLER = "true"
CONVERSION_API_URL = "http://api:8080"
CONVERSION_LANGUAGE_URL = "http://language:8084"
CONVERSION_MOSAIC_URL = "http://mosaic:8085"
CONVERSION_S3_URL = "minio:9000"

# Mosaic
MOSAIC_S3_URL = "minio:9000"

# Console
CONSOLE_PORT = "8086"
CONSOLE_HOST = "0.0.0.0"
CONSOLE_POSTGRES_URL = "cockroach"
CONSOLE_POSTGRES_PORT = "26257"
CONSOLE_POSTGRES_NAME = "voltaserve"
CONSOLE_POSTGRES_USER = "voltaserve"
CONSOLE_POSTGRES_PASSWORD = "voltaserve"
CONSOLE_WORKERS = "4"
SECURITY_JWT_SIGNING_KEY = "${jwt_signing_key}" # JWT signing key, sensitive value
SECURITY_CORS_ORIGINS = "http://${main_domain}:3000"
JWT_ALGORITHM = "HS256"
CONSOLE_URL = "${main_domain}"
CONSOLE_API_URL = "http://api:8080"
CONSOLE_IDP_URL = "http://idp:8081"
CONSOLE_WEBDAV_URL = "http://webdav:8082"
CONSOLE_CONVERSION_URL = "http://conversion:8083"
CONSOLE_LANGUAGE_URL = "http://language:8084"
CONSOLE_MOSAIC_URL = "http://mosaic:8085"

# Murph
MURPH_PORT = "8087"
MURPH_API_URL = "http://api:8080"
MURPH_CONVERSION_URL = "http://conversion:8083"
MURPH_POSTGRES_URL = "postgresql://voltaserve@cockroach:26257/voltaserve"
MURPH_S3_URL = "minio:9000"
MURPH_SEARCH_URL = "http://meilisearch:7700"
MURPH_REDIS_ADDRESS = "redis:6379"
LLM_GEMINI_API_KEY = "${llm_gemini_api_key}" # Gemini API key, sensitive value

# Migrations
DATABASE_URL = "postgresql://voltaserve@cockroach:26257/voltaserve"

[[config.mounts]]
source = "cockroach"
target = "/cockroach/cockroach-data"

[[config.mounts]]
source = "minio"
target = "/data"

[[config.mounts]]
source = "meilisearch"
target = "/meili_data"

[[config.mounts]]
source = "redis"
target = "/data"