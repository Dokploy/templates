[variables]
main_domain = "${domain}"
postgres_password = "${password:32}"
authentik_secret_key = "${password:32}"
postgres_user = "authentik"
postgres_db = "authentik"

[config]
[[config.domains]]
serviceName = "server"
port = 9000
host = "${main_domain}"
path = "/"

[[config.domains]]
serviceName = "server"
port = 9443
host = "${main_domain}"
path = "/"

[config.env]
# postgresql environment variables
POSTGRES_PASSWORD = "${postgres_password}"
POSTGRES_USER = "${postgres_user}"
POSTGRES_DB = "${postgres_db}"

# redis environment variables (none needed due to command-line configuration)

# server environment variables
AUTHENTIK_SECRET_KEY = "${authentik_secret_key}"
AUTHENTIK_REDIS__HOST = "redis"
AUTHENTIK_POSTGRESQL__HOST = "postgresql"
AUTHENTIK_POSTGRESQL__USER = "${postgres_user}"
AUTHENTIK_POSTGRESQL__NAME = "${postgres_db}"
AUTHENTIK_POSTGRESQL__PASSWORD = "${postgres_password}"
AUTHENTIK_IMAGE = "ghcr.io/goauthentik/server"
AUTHENTIK_TAG = "2025.6.3"

# worker environment variables
AUTHENTIK_WORKER_SECRET_KEY = "${authentik_secret_key}"
AUTHENTIK_WORKER_REDIS__HOST = "redis"
AUTHENTIK_WORKER_POSTGRESQL__HOST = "postgresql"
AUTHENTIK_WORKER_POSTGRESQL__USER = "${postgres_user}"
AUTHENTIK_WORKER_POSTGRESQL__NAME = "${postgres_db}"
AUTHENTIK_WORKER_POSTGRESQL__PASSWORD = "${postgres_password}"
AUTHENTIK_WORKER_IMAGE = "ghcr.io/goauthentik/server"
AUTHENTIK_WORKER_TAG = "2025.6.3"

[[config.mounts]]
filePath = "/media"
content = ""

[[config.mounts]]
filePath = "/custom-templates"
content = ""

[[config.mounts]]
filePath = "/certs"
content = ""